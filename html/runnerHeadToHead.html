<html>
<head>
<script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
<script src="https://www.amcharts.com/lib/3/serial.js"></script>
<script src="https://www.amcharts.com/lib/3/themes/light.js"></script>
<script src="http://www.amcharts.com/lib/3/plugins/dataloader/dataloader.min.js"></script>
 <style type="text/css">
#chartdiv {
  width: 100%;
  height: 500px;
}

</style>
</head>
<body>
<div style="height:300px;width: 100%;z-index:-1000">Header</div>
<div id="chartdiv"></div>
<script type='text/javascript'>//<![CDATA[
var chart = AmCharts.makeChart("chartdiv", {
  "type": "serial",
  "theme": "light",
  "marginRight": 40,
  "marginLeft": 40,
  "autoMarginOffset": 20,
  "dataDateFormat": "YYYY-MM-DD",
  "valueAxes": [{
    "id": "v1",
    "axisAlpha": 0,
    "position": "left",
    "ignoreAxisWidth": true
  }],
  "balloon": {
    "borderThickness": 1,
    "shadowAlpha": 0
  },
  "graphs": [{
    "id": "g1",
    "balloon": {
      "drop": false,
      "adjustBorderColor": false,
      "color": "#ffffff"
    },
    "bullet": "round",
    "bulletBorderAlpha": 1,
    "bulletColor": "#FFFFFF",
    /*"bulletSize": 2,*/
    "hideBulletsCount": 50,
    "lineThickness": 2,
	"lineColor": "#FF6600",
    "title": "Gavin Davies",
    "useLineColorForBulletBorder": true,
    "valueField": "position1",
    "balloonText": "<span style='font-size:14px;'>[[eventName]]<br />[[position1]], [[time1]], [[percentageGrading1]]%</span>"
  }, 
  {
    "id": "g2",
    "balloon": {
      "drop": false,
      "adjustBorderColor": false,
      "color": "#ffffff"
    },
    "bullet": "round",
    "bulletBorderAlpha": 1,
    "bulletColor": "#FFFFFF",
    /*"bulletSize": 2,*/
    "hideBulletsCount": 50,
    "lineThickness": 2,
	"lineColor": "#006600",
    "title": "Robert Chenery",
    "useLineColorForBulletBorder": true,
    "valueField": "position2",
    "balloonText": "<span style='font-size:14px;'>[[eventName]]<br />[[position2]], [[time2]], [[percentageGrading2]]%</span>"
  },
  {
    "id": "g3",
    "balloon": {
      "drop": false,
      "adjustBorderColor": false,
      "color": "#ffffff"
    },
    "bullet": "round",
    "bulletBorderAlpha": 1,
    "bulletColor": "#FFFFFF",
    /*"bulletSize": 2,*/
    "hideBulletsCount": 50,
    "lineThickness": 2,
	"lineColor": "#0066FF",
    "title": "David Laing",
    "useLineColorForBulletBorder": true,
    "valueField": "position3",
    "balloonText": "<span style='font-size:14px;'>[[eventName]]<br />[[position3]], [[time3]], [[percentageGrading3]]%</span>"
  }],
  "chartScrollbar": { 
    "oppositeAxis": false,
    "offset": 30,
    "scrollbarHeight": 80,
    "backgroundAlpha": 0,
    "selectedBackgroundAlpha": 1,
    "selectedBackgroundColor": "#cccccc",
    "graphFillAlpha": 0,
    "graphLineAlpha": 0.5,
    "selectedGraphFillAlpha": 0,
    "selectedGraphLineAlpha": 1,
    "autoGridCount": true,
    "color": "#000000"
  },
  "chartCursor": {
    "pan": true,
    "valueLineEnabled": true,
    "valueLineBalloonEnabled": true,
    "cursorAlpha": 1,
    "cursorColor": "#258cbb",
    "limitToGraph": "g1",
    "valueLineAlpha": 0.2
  },
  "valueScrollbar": {
    "oppositeAxis": false,
    "offset": 50,
    "scrollbarHeight": 10
  },
  "categoryField": "date",
  "categoryAxis": {
    "parseDates": true,
    "dashLength": 1,
    "minorGridEnabled": true
  },
   "legend": {
    "horizontalGap": 10,
    "maxColumns": 1,
    "position": "right",
    "useGraphSettings": true,
    "markerSize": 10
  },
 "dataLoader": {
	"url": "GavinRobertDavid.json",
	"format": "json"
  }
});

chart.addListener("rendered", zoomChart);

zoomChart();
var dataCount = 0;
function removeZeroResults(data) {
 var parsedData = [];
 for (var i = 0; i < data.length; i++) {
	if (data[i].percentageGrading != "0.00") {	
		parsedData.unshift(data[i]);
	}
 }
 dataCount = parsedData.length;
 return parsedData;
}

function zoomChart() {
  chart.zoomToIndexes(dataCount - 40, dataCount - 1);
}

//]]> 

</script>
</body>
</html>